// src/common/safe-url.ts
function safeUrl(url) {
  try {
    return new URL(url);
  } catch (ex) {
    return;
  }
}

// src/extension.ts
var extension = "browser" in globalThis && browser.runtime ? browser : chrome;

// src/signature.ts
var keys = {
  publicKey: `-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxkaMDjCfAuYlXmzRKyNmZ7f9rP/8jsXLK/Qbvf2XcVngcUy8Y7J3bM0LN1dxriXjHqhHePRsDQBxky+DQd0ODdlLq1ISFJnFshWE1TjMj22GR46tdQ6gDL4vIo9iGNQeb+0gqPVCfrws14+2gvWdlimKvFR//lP55M/WJvZ+F8T1a+DvPBMDCHQ6sKdq/J0kjuNM+CyYrRx++EZpMyu6JnUMoS/WF20XWAUS0slIV/LmorJ82xGBER6X+CQzf2HcoW8YbmDLbuPRYKZCnzb/37+NndPFyoiw436I6eSfGlBRcztYJEf0JIQ5f81/HKZ867U/0tP2XuSDsngTsWM/FwIDAQAB

-----END PUBLIC KEY-----`,
  privateKey: `-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDGRowOMJ8C5iVebNErI2Znt/2s//yOxcsr9Bu9/ZdxWeBxTLxjsndszQs3V3GuJeMeqEd49GwNAHGTL4NB3Q4N2UurUhIUmcWyFYTVOMyPbYZHjq11DqAMvi8ij2IY1B5v7SCo9UJ+vCzXj7aC9Z2WKYq8VH/+U/nkz9Ym9n4XxPVr4O88EwMIdDqwp2r8nSSO40z4LJitHH74RmkzK7omdQyhL9YXbRdYBRLSyUhX8uaisnzbEYERHpf4JDN/YdyhbxhuYMtu49FgpkKfNv/fv42d08XKiLDjfojp5J8aUFFzO1gkR/QkhDl/zX8cpnzrtT/S0/Ze5IOyeBOxYz8XAgMBAAECggEAJcva9PWFylqu8vIRaYTFB66GOA1QSrMfyNAu3afSz7PPWinDm8mwhFgN9E3CCO2F/xkbDs6hLlVQUTt0bQDDphYvG4h4k97AVfNOMAs0y36YY1mqbS8NiYBToeXtUEhXSQTN/gdK1rfuYGUv6IUDtlVS8hW1lHjToS+RZjoEzWjTSdWb+GlPErJUep8tKQdLnafoaHB2ifQvIkXhDmNmjgFGIt19ZRrgPkmJdkNox0xun+l6K6MaW3OljwVnmwY4vScURAEYwJwVebE2v7fw/+IYJ4WFKusd3pr6/GGc4fFO1z+suou6UtRGQO8cUiZ3t4nSZmz8iBfnoKDPChv9AQKBgQDuto16eEx4vdHXXfqF7/yU1W5/ol/u7y9F9do1+pODk2yEzoL9nshvx+HdZHWf1maMK1YLiXNq2DahbyTei1vtELkiZybdwonLaD70vNllx1KUM4XJl7k6UKC1pD3darr9yiWV1hiUJDssd0awpChI+IjLbaBBd9j6F7YToXAZgQKBgQDUolUeszuzVfp07RXwQQO6GhAVzm934KpWM1CnHYlWaOgHNzGLBZP3o+/SPF8HtyZOsnTYp60WMMAbXXloP1U44Ehs8ES2P/SBvlEKnLNyTffNogHTH+QU+n62VKjM4iHCYpAyLzFNyxPFeQmuK7c7wcx0D/hSvyjjFHKfghY0lwKBgCt45VT7WXnXn8Jn4/rGVKpKICBwUqYxutszxbR02K5qh6W78hD7/KaWsSRfaihcpDo8niPluTYo//HwSreYi3olxIFmZaaXCf8YEfcB+VlWrkw9Ac1PqzTagBn0Oiv7hug3Cxc5cSpxWrFjW2VJz+hSEp9xbHDfwYzyCn+Ss9aBAoGBAJoWWSC6OdUnxSveczt7obvHD0j+JAD3Kfj1jsjLuq6Hrz0rXheknymh/zSW0zbAHl6BK/Ok7uVZxp0OC+DjpFpnDZUEOIbpqcIrrIbIL7HxllXJxRC914bsT87JYtm2NUisLFpxoIUDWPyNTdqNi2cedY7V09oC9Ro5wyacGoNZAoGBAMOguaAcnTZ/Fx2YjP+3LW510PBeidQbbjhGuVP8W25t0GIa/XmKwGz2wqqSpicLTSLIKoIk0uA4uL6Ly8KHIeG6syRwKOpugiLU8RmpxeY0DNVY0R/JlB59WG9CdW7aOFmb7kFJVt8EIjrF4dArLd23YWpqu77WauN+dJNMbvbz
-----END PRIVATE KEY-----`
};
function str2ab(str) {
  const buf = new ArrayBuffer(str.length);
  const bufView = new Uint8Array(buf);
  for (let i = 0, strLen = str.length; i < strLen; i++) {
    bufView[i] = str.charCodeAt(i);
  }
  return buf;
}
function importPrivateKey(pem) {
  const pemHeader = "-----BEGIN PRIVATE KEY-----";
  const pemFooter = "-----END PRIVATE KEY-----";
  const pemContents = pem.substring(
    pemHeader.length,
    pem.length - pemFooter.length
  );
  const binaryDerString = globalThis.atob(pemContents);
  const binaryDer = str2ab(binaryDerString);
  return globalThis.crypto.subtle.importKey(
    "pkcs8",
    binaryDer,
    {
      name: "RSA-PSS",
      hash: "SHA-256"
    },
    true,
    ["sign"]
  );
}
importPrivateKey(keys.privateKey).then((v) => {
  console.log("Ok i have the key...", v);
  const bytes_to_encode = new TextEncoder().encode("something");
  console.log("Encoded bytes", bytes_to_encode);
  globalThis.crypto.subtle.sign(
    {
      name: "RSA-PSS",
      hash: "SHA-256",
      saltLength: 32
    },
    v,
    bytes_to_encode
  ).then((v2) => {
    const bytes_of_sig = new Uint8Array(v2);
    console.log("Bytes of signature", bytes_of_sig);
    const b64 = btoa(String.fromCharCode.apply(null, bytes_of_sig));
    console.log("Signature is", b64);
  }).catch((ex) => {
    console.log("Nope, didnt work", ex);
  });
});
var Signature = new class SignatureClass {
  key = null;
  last_signature = null;
  constructor() {
    this.initialize();
  }
  initialize = async () => {
    await this.importKey(keys.privateKey);
    await this.createSignature();
  };
  importKey = async (pem) => {
    const pemHeader = "-----BEGIN PRIVATE KEY-----";
    const pemFooter = "-----END PRIVATE KEY-----";
    const pemContents = pem.substring(
      pemHeader.length,
      pem.length - pemFooter.length
    );
    const binaryDerString = globalThis.atob(pemContents);
    const binaryDer = str2ab(binaryDerString);
    this.key = await globalThis.crypto.subtle.importKey(
      "pkcs8",
      binaryDer,
      {
        name: "RSA-PSS",
        hash: "SHA-256"
      },
      true,
      ["sign"]
    );
    return this.key;
  };
  createIdentityString = (date) => {
    return `james@skelly.jamesh.me@${(date ?? /* @__PURE__ */ new Date()).toISOString()}`;
  };
  createSignature = async () => {
    const key = this.key ?? await this.importKey(keys.privateKey);
    const now = /* @__PURE__ */ new Date();
    const identity = this.createIdentityString(now);
    const identity_bytes = new TextEncoder().encode(identity);
    const sign_result = await globalThis.crypto.subtle.sign(
      {
        name: "RSA-PSS",
        hash: "SHA-256",
        saltLength: 32
      },
      key,
      identity_bytes
    );
    const bytes_of_sig = new Uint8Array(sign_result);
    const b64 = btoa(String.fromCharCode.apply(null, bytes_of_sig));
    this.last_signature = {
      time: now.getTime(),
      phrase: identity,
      signature: b64
    };
    return this.last_signature;
  };
  getSignature = async () => {
    const now = (/* @__PURE__ */ new Date()).getTime();
    if (!this.last_signature || this.last_signature.time < now - 1e4) {
      return this.createSignature();
    }
    return this.last_signature;
  };
}();

// src/service-worker.ts
extension.runtime.onMessage.addListener((message, sender, sendResponse) => {
  console.log("Received message on service worker", message);
  (async () => {
    if (message === "return-sender") {
      return sender;
    }
    if (message === "request-signature") {
      return await Signature.getSignature();
    }
    if (typeof message === "object" && message.type === "fetch" && typeof message.url === "string") {
      const url = safeUrl(message.url);
      if (!url) {
        return null;
      }
      const { phrase, signature } = await Signature.getSignature();
      const response = await fetch(url, {
        method: "GET",
        headers: {
          Authorization: `Skelly ${phrase} ${signature}`
        }
      });
      const text = await response.text();
      return text;
    }
  })().then((a) => {
    console.log("Sending response", a);
    sendResponse(a);
  });
  return true;
});
extension.tabs.onCreated.addListener((tab) => {
  const tab_id = tab.id;
  const tab_url_value = tab.url ?? tab.pendingUrl;
  if (!tab_url_value || !tab_id) {
    return;
  }
  const url = safeUrl(tab_url_value);
  if (!url) {
    return;
  }
  if (!url.pathname.endsWith(".skelly")) {
    return;
  }
  extension.tabs.update(tab_id, {
    url: `${extension.runtime.getURL("reader.html")}?read=${url.href}`
  });
});
extension.tabs.onUpdated.addListener((tabId, info) => {
  if (!info.url) {
    return;
  }
  const url = safeUrl(info.url);
  if (!url) {
    return;
  }
  if (!url.pathname.endsWith(".skelly")) {
    return;
  }
  extension.tabs.update(tabId, {
    url: `${extension.runtime.getURL("reader.html")}?read=${url.href}`
  });
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvbW1vbi9zYWZlLXVybC50cyIsICIuLi9zcmMvZXh0ZW5zaW9uLnRzIiwgIi4uL3NyYy9zaWduYXR1cmUudHMiLCAiLi4vc3JjL3NlcnZpY2Utd29ya2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgZnVuY3Rpb24gc2FmZVVybCh1cmw6IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBuZXcgVVJMKHVybCk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgcmV0dXJuO1xuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IGV4dGVuc2lvbiA9XG4gICdicm93c2VyJyBpbiBnbG9iYWxUaGlzICYmIGJyb3dzZXIucnVudGltZSA/IGJyb3dzZXIgOiBjaHJvbWU7XG4iLCAiY29uc3Qga2V5cyA9IHtcbiAgcHVibGljS2V5OiBgLS0tLS1CRUdJTiBQVUJMSUMgS0VZLS0tLS1cbk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBeGthTURqQ2ZBdVlsWG16Ukt5Tm1aN2Y5clAvOGpzWExLL1FidmYyWGNWbmdjVXk4WTdKM2JNMExOMWR4cmlYakhxaEhlUFJzRFFCeGt5K0RRZDBPRGRsTHExSVNGSm5Gc2hXRTFUak1qMjJHUjQ2dGRRNmdETDR2SW85aUdOUWViKzBncVBWQ2Zyd3MxNCsyZ3ZXZGxpbUt2RlIvL2xQNTVNL1dKdlorRjhUMWErRHZQQk1EQ0hRNnNLZHEvSjBranVOTStDeVlyUngrK0VacE15dTZKblVNb1MvV0YyMFhXQVVTMHNsSVYvTG1vcko4MnhHQkVSNlgrQ1F6ZjJIY29XOFlibURMYnVQUllLWkNuemIvMzcrTm5kUEZ5b2l3NDM2STZlU2ZHbEJSY3p0WUpFZjBKSVE1ZjgxL0hLWjg2N1UvMHRQMlh1U0RzbmdUc1dNL0Z3SURBUUFCXFxuXG4tLS0tLUVORCBQVUJMSUMgS0VZLS0tLS1gLFxuICBwcml2YXRlS2V5OiBgLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdmdJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLZ3dnZ1NrQWdFQUFvSUJBUURHUm93T01KOEM1aVZlYk5FckkyWm50LzJzLy95T3hjc3I5QnU5L1pkeFdlQnhUTHhqc25kc3pRczNWM0d1SmVNZXFFZDQ5R3dOQUhHVEw0TkIzUTROMlV1clVoSVVtY1d5RllUVk9NeVBiWVpIanExMURxQU12aThpajJJWTFCNXY3U0NvOVVKK3ZDelhqN2FDOVoyV0tZcThWSC8rVS9ua3o5WW05bjRYeFBWcjRPODhFd01JZERxd3AycjhuU1NPNDB6NExKaXRISDc0Um1reks3b21kUXloTDlZWGJSZFlCUkxTeVVoWDh1YWlzbnpiRVlFUkhwZjRKRE4vWWR5aGJ4aHVZTXR1NDlGZ3BrS2ZOdi9mdjQyZDA4WEtpTERqZm9qcDVKOGFVRkZ6TzFna1IvUWtoRGwvelg4Y3BuenJ0VC9TMC9aZTVJT3llQk94WXo4WEFnTUJBQUVDZ2dFQUpjdmE5UFdGeWxxdTh2SVJhWVRGQjY2R09BMVFTck1meU5BdTNhZlN6N1BQV2luRG04bXdoRmdOOUUzQ0NPMkYveGtiRHM2aExsVlFVVHQwYlFERHBoWXZHNGg0azk3QVZmTk9NQXMweTM2WVkxbXFiUzhOaVlCVG9lWHRVRWhYU1FUTi9nZEsxcmZ1WUdVdjZJVUR0bFZTOGhXMWxIalRvUytSWmpvRXpXalRTZFdiK0dsUEVySlVlcDh0S1FkTG5hZm9hSEIyaWZRdklrWGhEbU5tamdGR0l0MTlaUnJnUGttSmRrTm94MHh1bitsNks2TWFXM09sandWbm13WTR2U2NVUkFFWXdKd1ZlYkUydjdmdy8rSVlKNFdGS3VzZDNwcjYvR0djNGZGTzF6K3N1b3U2VXRSR1FPOGNVaVozdDRuU1ptejhpQmZub0tEUENodjlBUUtCZ1FEdXRvMTZlRXg0dmRIWFhmcUY3L3lVMVc1L29sL3U3eTlGOWRvMStwT0RrMnlFem9MOW5zaHZ4K0hkWkhXZjFtYU1LMVlMaVhOcTJEYWhieVRlaTF2dEVMa2laeWJkd29uTGFENzB2TmxseDFLVU00WEpsN2s2VUtDMXBEM2RhcnI5eWlXVjFoaVVKRHNzZDBhd3BDaEkrSWpMYmFCQmQ5ajZGN1lUb1hBWmdRS0JnUURVb2xVZXN6dXpWZnAwN1JYd1FRTzZHaEFWem05MzRLcFdNMUNuSFlsV2FPZ0hOekdMQlpQM28rL1NQRjhIdHlaT3NuVFlwNjBXTU1BYlhYbG9QMVU0NEVoczhFUzJQL1NCdmxFS25MTnlUZmZOb2dIVEgrUVUrbjYyVktqTTRpSENZcEF5THpGTnl4UEZlUW11SzdjN3djeDBEL2hTdnlqakZIS2ZnaFkwbHdLQmdDdDQ1VlQ3V1huWG44Sm40L3JHVktwS0lDQndVcVl4dXRzenhiUjAySzVxaDZXNzhoRDcvS2FXc1NSZmFpaGNwRG84bmlQbHVUWW8vL0h3U3JlWWkzb2x4SUZtWmFhWENmOFlFZmNCK1ZsV3JrdzlBYzFQcXpUYWdCbjBPaXY3aHVnM0N4YzVjU3B4V3JGalcyVkp6K2hTRXA5eGJIRGZ3WXp5Q24rU3M5YUJBb0dCQUpvV1dTQzZPZFVueFN2ZWN6dDdvYnZIRDBqK0pBRDNLZmoxanNqTHVxNkhyejByWGhla255bWgvelNXMHpiQUhsNkJLL09rN3VWWnhwME9DK0RqcEZwbkRaVUVPSWJwcWNJcnJJYklMN0h4bGxYSnhSQzkxNGJzVDg3Sll0bTJOVWlzTEZweG9JVURXUHlOVGRxTmkyY2VkWTdWMDlvQzlSbzV3eWFjR29OWkFvR0JBTU9ndWFBY25UWi9GeDJZalArM0xXNTEwUEJlaWRRYmJqaEd1VlA4VzI1dDBHSWEvWG1Ld0d6MndxcVNwaWNMVFNMSUtvSWswdUE0dUw2THk4S0hJZUc2c3lSd0tPcHVnaUxVOFJtcHhlWTBETlZZMFIvSmxCNTlXRzlDZFc3YU9GbWI3a0ZKVnQ4RUlqckY0ZEFyTGQyM1lXcHF1NzdXYXVOK2RKTk1idmJ6XG4tLS0tLUVORCBQUklWQVRFIEtFWS0tLS0tYCxcbn07XG5cbi8qXG5Db252ZXJ0IGEgc3RyaW5nIGludG8gYW4gQXJyYXlCdWZmZXJcbmZyb20gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxMi8wNi9Ib3ctdG8tY29udmVydC1BcnJheUJ1ZmZlci10by1hbmQtZnJvbS1TdHJpbmdcbiovXG5mdW5jdGlvbiBzdHIyYWIoc3RyOiBzdHJpbmcpIHtcbiAgY29uc3QgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpO1xuICBjb25zdCBidWZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgZm9yIChsZXQgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykge1xuICAgIGJ1ZlZpZXdbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYnVmO1xufVxuXG4vLyBjb25zdCBwZW1FbmNvZGVkS2V5ID0gYC0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLVxuLy8gTUlJRXZRSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2N3Z2dTakFnRUFBb0lCQVFERDB0UFYvZHUydmZ0anZYajF0L2dYVEszOXNOQlZyT0FFYi9qS3pYYWUrWGEwSCszTGhaYVFJUU5NZkFDaUJTZ0lmWlV2RUdiKzdUcVhXUXBvTG9GUi9SN012R1djU2s5OEp5clZ0dmVEOFptWll5SXRTWTdtMmhjYXNxQUZpS3lPb3VWNXZ6eVJlODcvbEV5enpCcEYzYlFRNElEYVF1K0s5SGo1Zkt1VTZyck9lT2hzZG5KYytWZERRTFNjSHh2TW9MWjlWdHQrb0s5SjQvdE9Md3I0Q0c4a2hEbEJVUmNCWTZnUGNMbzNkUFUwOVNXKzZjdFgyY1g0bWtYeDZPLzBtbWRUbWFjci92dTUwS2RSTWxlRmVaWU9XUEFFaGhNZnl3eWJUdXpCaVBWSVpWUDhXRkNTS05NYmZpMVM5QTlQZEJxbmVid3dIaFgzL2hzRUJ0MkJBZ01CQUFFQ2dnRUFCRUkxUDZuZjZaczdtSmx5QkR2K1BmbDVyakwyY09xTHk2VG92dlpWYmxNa0NQcEp5RnVOSVBESzJ0SzJpODk3WmFYZmhQREJJS21sbE0ySHE2alpRS0IxMTBPQW5UUERnMEp4ek1pSUhQczMyUzFkL0tpbEhqR2ZmNEhqZDROWHAxbDFEcDhCVVBPbGxvclIyVFltMng2ZGNDR0Z3OWxoVHI4TzAzUXA0aGpuODRWakdJV0FEWUNrODNtZ1M0blJzbkhrZGlxWW5XeDFBaktsWTUxeUVLNlJjckRNaTBUaDJSWHJySU5vQzM1c1Z2K0FQdDJya29NR2k1MlJ3VEVzZUExS1pHRnJ4anE2MVJlSmlmNnAyVlhFY3ZIZVg2Q1dMeDAxNExHazQzejZRMjhQNkhnZUVWRWZJanlxQ1VlYTVEdS9tWWIvUXNSU0Nvc1hMeEJxd1FLQmdRRDErZmRDOVppTXJWSStrbTdOeDJDS0JuOHJKckRtVWg1U2JYbjJNWUpkclVkOGJZTm5aa0NnS01neFZYc3ZKcmJtVk9yYnkydHhPaXF1ZFprazVtRDNFNU8vUVpXUFdRTGdSdTh1ZVlOcG9iQVg5TlJnTmZaN3JaRCs4MXZoNU1mWmlYZnVaT3V6djI5aVpoVTBvcXlaOXk3NWVIa0xkcmVyTmt3WU9lNWFVUUtCZ1FETHphcERpMU54a0Jnc2o5aWlPNEtVYTdqdkQ0SmpScUZ5NFpoai9qYlF2bHZNMEYvdUZwN3N4VmNIR3g0cjExQys2aUNiaFg0dStadXUwSEdqVDRkK2hOWG1nR3l4UjhmSVVWeE9sT3REa1ZKYTVzT0JaSzczLzkvTUJlS3VzZG1KUFJoYWxaUWZNVUpSV0lvRVZETWhmZzN0Vy9yQmo1UllBdFAyZFRWVU1RS0JnRHM4eXI1MmRSbVQrQldYb0ZXd2FXQjBOaFlIU0Z6L2M4djRENElwNURKNU01a1VxcXV4Sldrc3lTR1FhNDBzYnFuRDA1ZkJRb3ZQTFU0OGhmZ3IvemdobjloVWpCY3NvWk92b1pSNHNSdzBVenRCdkErN2p6T3oxaEtBT3lXSXVsUjZWY2EweVVyTmxKNkc1UjU2K3NSTmtpT0VUdXBpMmRMQ3pjcWIwUG94QW9HQVp5Tkh2VEx2SVpONGlHU3JqejVxa000TEl3QklUaEZhZHhidjFmcTZwdDBPL0JHZjJvK2NFZHEwZGlZbEdLNjRjRVZ3QndTQm5TZzR2emxCcVJJQVVlakxqd0VEQUp5QTRFRThZNUE5bDA0ZHpWN25KYjVjUmFrNkNyZ1h4YXkvbUJKUkZ0YUh4VmxhWkd4WVBHU1lFNlVGUzArM0VPbW1ldnZEWlFCZjRxRUNnWUVBMFpGNlZhdnoyOCs4d0xPNlNQM3c4Tm1wSGs3Szl0R0V2VWZRMzBTZ0R4NEc3cVBJZ2ZQcmJCNE9QL0UwcUNmc0lJbWkzc0NQcGp2VU1RZFZWWnlQT0lNdUIrclYzWk94a3J6eEVVT3JwT3BSNDhGWmJMN1JOOTB5UlFzQXNycDllNGl2OFF3QjNWeExlN1gwVERxcW5SeXFyYy9vc0d6dVMyWmNIT0ttQ1U4PVxuLy8gLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLWA7XG5cbi8qXG5JbXBvcnQgYSBQRU0gZW5jb2RlZCBSU0EgcHJpdmF0ZSBrZXksIHRvIHVzZSBmb3IgUlNBLVBTUyBzaWduaW5nLlxuVGFrZXMgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgUEVNIGVuY29kZWQga2V5LCBhbmQgcmV0dXJucyBhIFByb21pc2VcbnRoYXQgd2lsbCByZXNvbHZlIHRvIGEgQ3J5cHRvS2V5IHJlcHJlc2VudGluZyB0aGUgcHJpdmF0ZSBrZXkuXG4qL1xuZnVuY3Rpb24gaW1wb3J0UHJpdmF0ZUtleShwZW06IHN0cmluZykge1xuICAvLyBmZXRjaCB0aGUgcGFydCBvZiB0aGUgUEVNIHN0cmluZyBiZXR3ZWVuIGhlYWRlciBhbmQgZm9vdGVyXG4gIGNvbnN0IHBlbUhlYWRlciA9ICctLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS0nO1xuICBjb25zdCBwZW1Gb290ZXIgPSAnLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLSc7XG4gIGNvbnN0IHBlbUNvbnRlbnRzID0gcGVtLnN1YnN0cmluZyhcbiAgICBwZW1IZWFkZXIubGVuZ3RoLFxuICAgIHBlbS5sZW5ndGggLSBwZW1Gb290ZXIubGVuZ3RoLFxuICApO1xuXG4gIC8vIGJhc2U2NCBkZWNvZGUgdGhlIHN0cmluZyB0byBnZXQgdGhlIGJpbmFyeSBkYXRhXG4gIGNvbnN0IGJpbmFyeURlclN0cmluZyA9IGdsb2JhbFRoaXMuYXRvYihwZW1Db250ZW50cyk7XG4gIC8vIGNvbnZlcnQgZnJvbSBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAgY29uc3QgYmluYXJ5RGVyID0gc3RyMmFiKGJpbmFyeURlclN0cmluZyk7XG5cbiAgcmV0dXJuIGdsb2JhbFRoaXMuY3J5cHRvLnN1YnRsZS5pbXBvcnRLZXkoXG4gICAgJ3BrY3M4JyxcbiAgICBiaW5hcnlEZXIsXG4gICAge1xuICAgICAgbmFtZTogJ1JTQS1QU1MnLFxuICAgICAgaGFzaDogJ1NIQS0yNTYnLFxuICAgIH0sXG4gICAgdHJ1ZSxcbiAgICBbJ3NpZ24nXSxcbiAgKTtcbn1cblxuaW1wb3J0UHJpdmF0ZUtleShrZXlzLnByaXZhdGVLZXkpLnRoZW4oKHYpID0+IHtcbiAgY29uc29sZS5sb2coJ09rIGkgaGF2ZSB0aGUga2V5Li4uJywgdik7XG4gIGNvbnN0IGJ5dGVzX3RvX2VuY29kZSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSgnc29tZXRoaW5nJyk7XG4gIGNvbnNvbGUubG9nKCdFbmNvZGVkIGJ5dGVzJywgYnl0ZXNfdG9fZW5jb2RlKTtcbiAgZ2xvYmFsVGhpcy5jcnlwdG8uc3VidGxlXG4gICAgLnNpZ24oXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdSU0EtUFNTJyxcbiAgICAgICAgaGFzaDogJ1NIQS0yNTYnLFxuICAgICAgICBzYWx0TGVuZ3RoOiAzMixcbiAgICAgIH0sXG4gICAgICB2LFxuICAgICAgYnl0ZXNfdG9fZW5jb2RlLFxuICAgIClcbiAgICAudGhlbigodikgPT4ge1xuICAgICAgY29uc3QgYnl0ZXNfb2Zfc2lnID0gbmV3IFVpbnQ4QXJyYXkodikgYXMgdW5rbm93biBhcyBudW1iZXJbXTtcbiAgICAgIGNvbnNvbGUubG9nKCdCeXRlcyBvZiBzaWduYXR1cmUnLCBieXRlc19vZl9zaWcpO1xuICAgICAgY29uc3QgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGJ5dGVzX29mX3NpZykpO1xuXG4gICAgICBjb25zb2xlLmxvZygnU2lnbmF0dXJlIGlzJywgYjY0KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdOb3BlLCBkaWRudCB3b3JrJywgZXgpO1xuICAgIH0pO1xufSk7XG5cbmV4cG9ydCBjb25zdCBTaWduYXR1cmUgPSBuZXcgKGNsYXNzIFNpZ25hdHVyZUNsYXNzIHtcbiAgcHJpdmF0ZSBrZXk6IENyeXB0b0tleSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxhc3Rfc2lnbmF0dXJlOiB7XG4gICAgcGhyYXNlOiBzdHJpbmc7XG4gICAgc2lnbmF0dXJlOiBzdHJpbmc7XG4gICAgdGltZTogbnVtYmVyO1xuICB9IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5pbml0aWFsaXplKCk7XG4gIH1cblxuICBwcml2YXRlIGluaXRpYWxpemUgPSBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgdGhpcy5pbXBvcnRLZXkoa2V5cy5wcml2YXRlS2V5KTtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZVNpZ25hdHVyZSgpO1xuICB9O1xuXG4gIHByaXZhdGUgaW1wb3J0S2V5ID0gYXN5bmMgKHBlbTogc3RyaW5nKTogUHJvbWlzZTxDcnlwdG9LZXk+ID0+IHtcbiAgICAvLyBmZXRjaCB0aGUgcGFydCBvZiB0aGUgUEVNIHN0cmluZyBiZXR3ZWVuIGhlYWRlciBhbmQgZm9vdGVyXG4gICAgY29uc3QgcGVtSGVhZGVyID0gJy0tLS0tQkVHSU4gUFJJVkFURSBLRVktLS0tLSc7XG4gICAgY29uc3QgcGVtRm9vdGVyID0gJy0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0nO1xuICAgIGNvbnN0IHBlbUNvbnRlbnRzID0gcGVtLnN1YnN0cmluZyhcbiAgICAgIHBlbUhlYWRlci5sZW5ndGgsXG4gICAgICBwZW0ubGVuZ3RoIC0gcGVtRm9vdGVyLmxlbmd0aCxcbiAgICApO1xuXG4gICAgLy8gYmFzZTY0IGRlY29kZSB0aGUgc3RyaW5nIHRvIGdldCB0aGUgYmluYXJ5IGRhdGFcbiAgICBjb25zdCBiaW5hcnlEZXJTdHJpbmcgPSBnbG9iYWxUaGlzLmF0b2IocGVtQ29udGVudHMpO1xuICAgIC8vIGNvbnZlcnQgZnJvbSBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gQXJyYXlCdWZmZXJcbiAgICBjb25zdCBiaW5hcnlEZXIgPSBzdHIyYWIoYmluYXJ5RGVyU3RyaW5nKTtcblxuICAgIHRoaXMua2V5ID0gYXdhaXQgZ2xvYmFsVGhpcy5jcnlwdG8uc3VidGxlLmltcG9ydEtleShcbiAgICAgICdwa2NzOCcsXG4gICAgICBiaW5hcnlEZXIsXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdSU0EtUFNTJyxcbiAgICAgICAgaGFzaDogJ1NIQS0yNTYnLFxuICAgICAgfSxcbiAgICAgIHRydWUsXG4gICAgICBbJ3NpZ24nXSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMua2V5O1xuICB9O1xuXG4gIGNyZWF0ZUlkZW50aXR5U3RyaW5nID0gKGRhdGU/OiBEYXRlKSA9PiB7XG4gICAgcmV0dXJuIGBqYW1lc0Bza2VsbHkuamFtZXNoLm1lQCR7KGRhdGUgPz8gbmV3IERhdGUoKSkudG9JU09TdHJpbmcoKX1gO1xuICB9O1xuXG4gIGNyZWF0ZVNpZ25hdHVyZSA9IGFzeW5jICgpOiBQcm9taXNlPHtcbiAgICBwaHJhc2U6IHN0cmluZztcbiAgICBzaWduYXR1cmU6IHN0cmluZztcbiAgfT4gPT4ge1xuICAgIGNvbnN0IGtleSA9IHRoaXMua2V5ID8/IChhd2FpdCB0aGlzLmltcG9ydEtleShrZXlzLnByaXZhdGVLZXkpKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGlkZW50aXR5ID0gdGhpcy5jcmVhdGVJZGVudGl0eVN0cmluZyhub3cpO1xuICAgIGNvbnN0IGlkZW50aXR5X2J5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlkZW50aXR5KTtcblxuICAgIGNvbnN0IHNpZ25fcmVzdWx0ID0gYXdhaXQgZ2xvYmFsVGhpcy5jcnlwdG8uc3VidGxlLnNpZ24oXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdSU0EtUFNTJyxcbiAgICAgICAgaGFzaDogJ1NIQS0yNTYnLFxuICAgICAgICBzYWx0TGVuZ3RoOiAzMixcbiAgICAgIH0sXG4gICAgICBrZXksXG4gICAgICBpZGVudGl0eV9ieXRlcyxcbiAgICApO1xuXG4gICAgY29uc3QgYnl0ZXNfb2Zfc2lnID0gbmV3IFVpbnQ4QXJyYXkoc2lnbl9yZXN1bHQpIGFzIHVua25vd24gYXMgbnVtYmVyW107XG4gICAgY29uc3QgYjY0ID0gYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGJ5dGVzX29mX3NpZykpO1xuXG4gICAgdGhpcy5sYXN0X3NpZ25hdHVyZSA9IHtcbiAgICAgIHRpbWU6IG5vdy5nZXRUaW1lKCksXG4gICAgICBwaHJhc2U6IGlkZW50aXR5LFxuICAgICAgc2lnbmF0dXJlOiBiNjQsXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLmxhc3Rfc2lnbmF0dXJlO1xuICB9O1xuXG4gIGdldFNpZ25hdHVyZSA9IGFzeW5jICgpOiBQcm9taXNlPHsgcGhyYXNlOiBzdHJpbmc7IHNpZ25hdHVyZTogc3RyaW5nIH0+ID0+IHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBpZiAoIXRoaXMubGFzdF9zaWduYXR1cmUgfHwgdGhpcy5sYXN0X3NpZ25hdHVyZS50aW1lIDwgbm93IC0gMTAwMDApIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNpZ25hdHVyZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmxhc3Rfc2lnbmF0dXJlO1xuICB9O1xufSkoKTtcbiIsICJpbXBvcnQgeyBzYWZlVXJsIH0gZnJvbSAnLi9jb21tb24vc2FmZS11cmwnO1xuaW1wb3J0IHsgZXh0ZW5zaW9uIH0gZnJvbSAnLi9leHRlbnNpb24nO1xuaW1wb3J0IHsgU2lnbmF0dXJlIH0gZnJvbSAnLi9zaWduYXR1cmUnO1xuXG5leHRlbnNpb24ucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoKG1lc3NhZ2UsIHNlbmRlciwgc2VuZFJlc3BvbnNlKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBtZXNzYWdlIG9uIHNlcnZpY2Ugd29ya2VyJywgbWVzc2FnZSk7XG4gIChhc3luYyAoKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2UgPT09ICdyZXR1cm4tc2VuZGVyJykge1xuICAgICAgcmV0dXJuIHNlbmRlcjtcbiAgICB9XG4gICAgaWYgKG1lc3NhZ2UgPT09ICdyZXF1ZXN0LXNpZ25hdHVyZScpIHtcbiAgICAgIHJldHVybiBhd2FpdCBTaWduYXR1cmUuZ2V0U2lnbmF0dXJlKCk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0JyAmJlxuICAgICAgbWVzc2FnZS50eXBlID09PSAnZmV0Y2gnICYmXG4gICAgICB0eXBlb2YgbWVzc2FnZS51cmwgPT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICBjb25zdCB1cmwgPSBzYWZlVXJsKG1lc3NhZ2UudXJsKTtcblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHsgcGhyYXNlLCBzaWduYXR1cmUgfSA9IGF3YWl0IFNpZ25hdHVyZS5nZXRTaWduYXR1cmUoKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBTa2VsbHkgJHtwaHJhc2V9ICR7c2lnbmF0dXJlfWAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcblxuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9KSgpLnRoZW4oKGEpID0+IHtcbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyByZXNwb25zZScsIGEpO1xuICAgIHNlbmRSZXNwb25zZShhKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHRydWU7XG59KTtcblxuZXh0ZW5zaW9uLnRhYnMub25DcmVhdGVkLmFkZExpc3RlbmVyKCh0YWIpID0+IHtcbiAgY29uc3QgdGFiX2lkID0gdGFiLmlkO1xuICBjb25zdCB0YWJfdXJsX3ZhbHVlID0gdGFiLnVybCA/PyB0YWIucGVuZGluZ1VybDtcbiAgaWYgKCF0YWJfdXJsX3ZhbHVlIHx8ICF0YWJfaWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB1cmwgPSBzYWZlVXJsKHRhYl91cmxfdmFsdWUpO1xuXG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF1cmwucGF0aG5hbWUuZW5kc1dpdGgoJy5za2VsbHknKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGV4dGVuc2lvbi50YWJzLnVwZGF0ZSh0YWJfaWQsIHtcbiAgICB1cmw6IGAke2V4dGVuc2lvbi5ydW50aW1lLmdldFVSTCgncmVhZGVyLmh0bWwnKX0/cmVhZD0ke3VybC5ocmVmfWAsXG4gIH0pO1xufSk7XG5cbmV4dGVuc2lvbi50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcigodGFiSWQsIGluZm8pID0+IHtcbiAgaWYgKCFpbmZvLnVybCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHVybCA9IHNhZmVVcmwoaW5mby51cmwpO1xuXG4gIGlmICghdXJsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKCF1cmwucGF0aG5hbWUuZW5kc1dpdGgoJy5za2VsbHknKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGV4dGVuc2lvbi50YWJzLnVwZGF0ZSh0YWJJZCwge1xuICAgIHVybDogYCR7ZXh0ZW5zaW9uLnJ1bnRpbWUuZ2V0VVJMKCdyZWFkZXIuaHRtbCcpfT9yZWFkPSR7dXJsLmhyZWZ9YCxcbiAgfSk7XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBTyxTQUFTLFFBQVEsS0FBYTtBQUNuQyxNQUFJO0FBQ0YsV0FBTyxJQUFJLElBQUksR0FBRztBQUFBLEVBQ3BCLFNBQVMsSUFBSTtBQUNYO0FBQUEsRUFDRjtBQUNGOzs7QUNOTyxJQUFNLFlBQ1gsYUFBYSxjQUFj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QjtBQUNBLFlBQU0sTUFBTSxRQUFRLFFBQVEsR0FBRztBQUUvQixVQUFJLENBQUMsS0FBSztBQUNSLGVBQU87QUFBQSxNQUNUO0FBRUEsWUFBTSxFQUFFLFFBQVEsVUFBVSxJQUFJLE1BQU0sVUFBVSxhQUFhO0FBRTNELFlBQU0sV0FBVyxNQUFNLE1BQU0sS0FBSztBQUFBLFFBQ2hDLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxVQUNQLGVBQWUsVUFBVSxNQUFNLElBQUksU0FBUztBQUFBLFFBQzlDO0FBQUEsTUFDRixDQUFDO0FBRUQsWUFBTSxPQUFPLE1BQU0sU0FBUyxLQUFLO0FBRWpDLGFBQU87QUFBQSxJQUNUO0FBQUEsRUFDRixHQUFHLEVBQUUsS0FBSyxDQUFDLE1BQU07QUFDZixZQUFRLElBQUksb0JBQW9CLENBQUM7QUFDakMsaUJBQWEsQ0FBQztBQUFBLEVBQ2hCLENBQUM7QUFFRCxTQUFPO0FBQ1QsQ0FBQztBQUVELFVBQVUsS0FBSyxVQUFVLFlBQVksQ0FBQyxRQUFRO0FBQzVDLFFBQU0sU0FBUyxJQUFJO0FBQ25CLFFBQU0sZ0JBQWdCLElBQUksT0FBTyxJQUFJO0FBQ3JDLE1BQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRO0FBQzdCO0FBQUEsRUFDRjtBQUVBLFFBQU0sTUFBTSxRQUFRLGFBQWE7QUFFakMsTUFBSSxDQUFDLEtBQUs7QUFDUjtBQUFBLEVBQ0Y7QUFFQSxNQUFJLENBQUMsSUFBSSxTQUFTLFNBQVMsU0FBUyxHQUFHO0FBQ3JDO0FBQUEsRUFDRjtBQUVBLFlBQVUsS0FBSyxPQUFPLFFBQVE7QUFBQSxJQUM1QixLQUFLLEdBQUcsVUFBVSxRQUFRLE9BQU8sYUFBYSxDQUFDLFNBQVMsSUFBSSxJQUFJO0FBQUEsRUFDbEUsQ0FBQztBQUNILENBQUM7QUFFRCxVQUFVLEtBQUssVUFBVSxZQUFZLENBQUMsT0FBTyxTQUFTO0FBQ3BELE1BQUksQ0FBQyxLQUFLLEtBQUs7QUFDYjtBQUFBLEVBQ0Y7QUFFQSxRQUFNLE1BQU0sUUFBUSxLQUFLLEdBQUc7QUFFNUIsTUFBSSxDQUFDLEtBQUs7QUFDUjtBQUFBLEVBQ0Y7QUFFQSxNQUFJLENBQUMsSUFBSSxTQUFTLFNBQVMsU0FBUyxHQUFHO0FBQ3JDO0FBQUEsRUFDRjtBQUVBLFlBQVUsS0FBSyxPQUFPLE9BQU87QUFBQSxJQUMzQixLQUFLLEdBQUcsVUFBVSxRQUFRLE9BQU8sYUFBYSxDQUFDLFNBQVMsSUFBSSxJQUFJO0FBQUEsRUFDbEUsQ0FBQztBQUNILENBQUM7IiwKICAibmFtZXMiOiBbInYiXQp9Cg==
